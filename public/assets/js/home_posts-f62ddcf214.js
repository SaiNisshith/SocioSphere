{function notification(t){Toastify({text:t,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",backgroundColor:"linear-gradient(to right, #00b09b, #96c93d)",stopOnFocus:!0}).showToast()}let t=function(){let t=$("#new-post-form");t.submit((function(n){n.preventDefault(),$.ajax({url:"/posts/new_post",data:t.serialize(),type:"POST",dataType:"json"}).done((function(t){console.log(t);let n=o(t.data);$("#feed-display").prepend(n),$("#post-content-area").val(""),notification("Post is Published"),creComment(n.find(".post-comments-form")),toggleLikefun(n.find("like-toggle-button")),e(n.find(".delete-post-button"))})).fail((function(t,e,o){alert("Sorry, there was a problem!"),console.log("Error: "+o),console.log("Status: "+e),console.dir(t)}))}))},e=function(t){$(t).click((function(t){t.preventDefault(),$.ajax({url:$(this).attr("href"),type:"GET"}).done((function(t){$(`#post-${t.data.post_id}`).remove(),notification("Successfully deleted the post")})).fail((function(t,e,o){alert("Sorry, there was a problem!"),console.log("Error: "+o),console.log("Status: "+e),console.dir(t)}))}))},o=function(t){return $(`\n                <ul id="post-${t.post._id}">\n                    \n                        <li><a class="delete-post-button"  href="/posts/deletepost/${t.post._id}">X</a></li>\n                    \n                    <li>${t.post.content}</li>\n                    <li>${t.user.name}</li>\n                    <li>${t.user.email}</li>\n                    <li>${t.date}</li>\n                    <li>\n                        <span>0</span>\n                        <span>&nbsp;Likes</span>\n                    </li>\n                    <li>\n                    <h4>Comments</h4>\n                     <div class="post-comments">\n                           \n                                <form action="/comments/new_comment" method="post" class="post-comments-form" id="post-comments-form-${t.post._id}">\n                                    <textarea name="content" cols="30" rows="1" placeholder="Your Response...." required></textarea>\n                                    <input type="hidden" name="post_id" value="${t.post._id}">\n                                    <button type="submit">Comment</button>\n                                </form>\n                            \n                \n                            <div id="post-comments-${t.post._id}">\n                            </div>\n                     </div>\n                    </li>\n                </ul>\n        `)};function creComment(t){$(t).submit((function(t){let e="#"+$(this).attr("id"),o=$(e);t.preventDefault(),$.ajax({url:"/comments/new_comment",data:o.serialize(),type:"POST",dataType:"json"}).done((function(t){console.log(t);let o="#post-comments-"+t.data.comment.post;console.log(o);let l=n(t.data);$(o).prepend(l),$(e+" textarea").val(""),console.log(l.find(".comment-delete-button")),delComment(l.find(".comment-delete-button")),toggleLikefun(l.find("like-toggle-button")),notification("Comment is Published")})).fail((function(t,e,o){alert("Sorry, there was a problem!"),console.log("Error: "+o),console.log("Status: "+e),console.dir(t)}))}))}function delComment(t){$(t).click((function(t){t.preventDefault(),$.ajax({url:$(this).attr("href"),type:"GET"}).done((function(t){console.log(t);let e="#comments-"+t.data.commentId;$(e).remove(),notification("Comment is successfully deleted")})).fail((function(t,e,o){alert("Sorry, there was a problem!"),console.log("Error: "+o),console.log("Status: "+e),console.dir(t)}))}))}let n=function(t){return $(`<ul id="comments-${t.comment._id}">\n                \n                        <li><a href="/comments/delete_comment?id=${t.comment._id}&postUid=${t.post.user._id}" class="comment-delete-button" >X</a></li>\n                    \n                    <li>${t.comment.content}</li>\n                    <li>${t.user.name}</li>\n                    <li>${t.date}</li>\n                    <li>\n                        <span>0</span>\n                        <span>&nbsp;Likes</span>\n                    </li>\n                    <br>\n                </ul>\n                `)};function toggleLikefun(t){$(t).click((function(t){$(this).text();let e=$(this).attr("data-id"),o=parseInt($("#"+e).text());t.preventDefault(),$.ajax({url:$(this).attr("href"),type:"GET"}).done((function(t){t.data.deleted?o-=1:o+=1,console.log(t),$("#"+e).text(o)})).fail((function(t,e,o){alert("Sorry, there was a problem!"),console.log("Error: "+o),console.log("Status: "+e),console.dir(t)}))}))}toggleLikefun($(".like-toggle-button")),t(),e(".delete-post-button"),creComment(".post-comments-form"),delComment(".comment-delete-button")}